<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TokoKu - Demo Marketplace</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #f3f4f6;
      color: #1f2937;
      line-height: 1.5;
    }
    
    html, body {
      height: 100%;
      width: 100%;
    }
    
    .container-full {
      width: 100%;
      height: 100%;
      overflow-y: auto;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    /* Header */
    header {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      position: sticky;
      top: 0;
      z-index: 50;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .header-top {
      max-width: 80rem;
      margin: 0 auto;
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .logo-badge {
      width: 2.5rem;
      height: 2.5rem;
      background: linear-gradient(135deg, #4ade80 0%, #10b981 100%);
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.125rem;
    }
    
    .logo-text {
      color: white;
      font-weight: bold;
      font-size: 1.25rem;
      display: none;
    }
    
    @media (min-width: 640px) {
      .logo-text {
        display: block;
      }
    }
    
    .search-bar {
      flex: 1;
      max-width: 32rem;
    }
    
    .search-input {
      width: 100%;
      padding: 0.625rem 1rem 0.625rem 3rem;
      border-radius: 0.75rem;
      border: none;
      outline: none;
      font-size: 0.875rem;
      position: relative;
    }
    
    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      width: 1.25rem;
      height: 1.25rem;
      color: #9ca3af;
    }
    
    .nav-icons {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .icon-btn {
      position: relative;
      padding: 0.5rem;
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      border-radius: 0.75rem;
      transition: background-color 0.2s;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .icon-btn:hover {
      background-color: rgba(255,255,255,0.2);
    }
    
    .icon-btn svg {
      width: 1.5rem;
      height: 1.5rem;
    }
    
    .cart-badge {
      position: absolute;
      top: -0.25rem;
      right: -0.25rem;
      width: 1.25rem;
      height: 1.25rem;
      background-color: #ef4444;
      border-radius: 50%;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }
    
    .login-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background-color: rgba(255,255,255,0.2);
      hover: rgba(255,255,255,0.3);
      padding: 0.5rem 0.75rem;
      border-radius: 0.75rem;
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .login-btn:hover {
      background-color: rgba(255,255,255,0.3);
    }
    
    .login-btn svg {
      width: 1.25rem;
      height: 1.25rem;
    }
    
    @media (max-width: 640px) {
      .login-btn span {
        display: none;
      }
    }
    
    .category-nav {
      background-color: rgba(255,255,255,0.1);
      backdrop-filter: blur(4px);
    }
    
    .category-nav-content {
      max-width: 80rem;
      margin: 0 auto;
      padding: 0;
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 0.5rem 1rem;
      overflow-x: auto;
    }
    
    .category-nav-content a {
      color: rgba(255,255,255,0.9);
      text-decoration: none;
      white-space: nowrap;
      font-size: 0.875rem;
      transition: color 0.2s;
      padding: 0.5rem 0;
    }
    
    .category-nav-content a:hover {
      color: white;
    }
    
    /* Main Content */
    main {
      max-width: 80rem;
      margin: 0 auto;
      padding: 1.5rem 1rem;
    }
    
    /* Banner */
    .banner-container {
      position: relative;
      border-radius: 1rem;
      overflow: hidden;
      margin-bottom: 2rem;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    .banner-slider {
      display: flex;
      transition: transform 0.5s ease;
    }
    
    .banner-slide {
      width: 100%;
      flex-shrink: 0;
      padding: 2rem;
      display: flex;
      align-items: center;
      min-height: 300px;
    }
    
    .banner-slide-1 {
      background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
    }
    
    .banner-slide-2 {
      background: linear-gradient(135deg, #2563eb 0%, #06b6d4 100%);
    }
    
    .banner-slide-3 {
      background: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
    }
    
    .banner-content {
      max-width: 28rem;
      color: white;
    }
    
    .banner-badge {
      background-color: #fbbf24;
      color: #92400e;
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: bold;
      display: inline-block;
      margin-bottom: 1rem;
    }
    
    .banner-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    @media (min-width: 768px) {
      .banner-title {
        font-size: 2.25rem;
      }
    }
    
    .banner-desc {
      color: rgba(255,255,255,0.9);
      margin-bottom: 1rem;
    }
    
    .banner-btn {
      background-color: white;
      color: #7c3aed;
      padding: 0.625rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .banner-btn:hover {
      background-color: #f3f4f6;
    }
    
    .banner-nav {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
    }
    
    .banner-dot {
      width: 0.75rem;
      height: 0.75rem;
      border-radius: 50%;
      background-color: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: background-color 0.2s;
      border: none;
    }
    
    .banner-dot.active {
      background-color: white;
    }
    
    .banner-btn-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 2.5rem;
      height: 2.5rem;
      background-color: rgba(255,255,255,0.8);
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transition: background-color 0.2s;
    }
    
    .banner-btn-nav:hover {
      background-color: white;
    }
    
    .banner-btn-nav svg {
      width: 1.5rem;
      height: 1.5rem;
    }
    
    .banner-btn-prev {
      left: 1rem;
    }
    
    .banner-btn-next {
      right: 1rem;
    }
    
    /* Section Headers */
    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .section-title {
      font-size: 1.25rem;
      font-weight: bold;
      color: #1f2937;
    }
    
    .sort-select {
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      outline: none;
      cursor: pointer;
    }
    
    .sort-select:focus {
      box-shadow: 0 0 0 2px #10b981;
    }
    
    /* Flash Sale Section */
    .flash-sale-header {
      background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .flash-sale-header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .flash-sale-title {
      font-size: 1.125rem;
      font-weight: bold;
      color: white;
    }
    
    .flash-sale-timer {
      background-color: rgba(255,255,255,0.2);
      backdrop-filter: blur(4px);
      padding: 0.5rem 0.75rem;
      border-radius: 0.5rem;
    }
    
    .flash-timer {
      font-family: 'Courier New', monospace;
      font-weight: bold;
      color: white;
      font-size: 1.125rem;
    }
    
    .flash-sale-container {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }
    
    /* Product Grid */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
    }
    
    @media (min-width: 640px) {
      .product-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (min-width: 768px) {
      .product-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (min-width: 1024px) {
      .product-grid {
        grid-template-columns: repeat(5, 1fr);
      }
    }
    
    @media (min-width: 1280px) {
      .product-grid {
        grid-template-columns: repeat(6, 1fr);
      }
    }
    
    .product-card {
      background: white;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.1);
    }
    
    .product-image {
      width: 100%;
      aspect-ratio: 1 / 1;
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .product-discount {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background-color: #ef4444;
      color: white;
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      font-weight: bold;
    }
    
    .product-info {
      padding: 0.75rem;
    }
    
    .product-name {
      font-size: 0.875rem;
      font-weight: 500;
      color: #1f2937;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      margin-bottom: 0.5rem;
      min-height: 2.5rem;
    }
    
    .product-price {
      color: #10b981;
      font-weight: bold;
      margin-bottom: 0.25rem;
    }
    
    .product-original-price {
      font-size: 0.75rem;
      color: #9ca3af;
      text-decoration: line-through;
    }
    
    .product-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: #6b7280;
    }
    
    .rating-star {
      width: 1rem;
      height: 1rem;
      fill: #eab308;
    }
    
    .location-icon {
      width: 0.75rem;
      height: 0.75rem;
      color: #ef4444;
    }
    
    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background-color: rgba(0,0,0,0.5);
      z-index: 50;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      width: 100%;
      max-width: 32rem;
      max-height: 80%;
      overflow-y: auto;
      box-shadow: 0 25px 50px rgba(0,0,0,0.2);
    }
    
    .modal-large {
      max-width: 56rem;
    }
    
    .modal-header {
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .modal-title {
      font-weight: bold;
      font-size: 1.125rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .modal-close {
      width: 2rem;
      height: 2rem;
      border: none;
      background-color: transparent;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.5rem;
      transition: background-color 0.2s;
    }
    
    .modal-close:hover {
      background-color: #f3f4f6;
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    .modal-footer {
      padding: 1rem;
      border-top: 1px solid #e5e7eb;
      background-color: #f9fafb;
    }
    
    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-size: 0.875rem;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    
    .btn-secondary {
      background-color: #e5e7eb;
      color: #1f2937;
    }
    
    .btn-secondary:hover {
      background-color: #d1d5db;
    }
    
    .btn-block {
      width: 100%;
    }
    
    /* Chat Bubble */
    .chat-bubble {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      z-index: 40;
    }
    
    .chat-btn {
      width: 3.5rem;
      height: 3.5rem;
      background: linear-gradient(135deg, #10b981 0%, #047857 100%);
      border-radius: 50%;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      cursor: pointer;
      border: 2px solid white;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .chat-btn:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
      transform: scale(1.1);
    }
    
    .chat-btn.animate-bounce {
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-0.5rem); }
    }
    
    .chat-btn img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .chat-window {
      position: absolute;
      bottom: 5rem;
      right: 0;
      width: 320px;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 20px 25px rgba(0,0,0,0.15);
      display: none;
      flex-direction: column;
      max-height: 24rem;
    }
    
    .chat-window.active {
      display: flex;
    }
    
    .chat-header {
      background: linear-gradient(135deg, #10b981 0%, #047857 100%);
      color: white;
      padding: 1rem;
      border-radius: 1rem 1rem 0 0;
    }
    
    .chat-header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .chat-header-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex: 1;
    }
    
    .chat-header-info img {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
    }
    
    .chat-header-text h3 {
      font-weight: bold;
      font-size: 1.125rem;
      margin: 0;
    }
    
    .chat-header-text p {
      font-size: 0.75rem;
      color: rgba(255,255,255,0.8);
      margin: 0.25rem 0 0 0;
    }
    
    .chat-close-btn {
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      padding: 0.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .chat-close-btn svg {
      width: 1.25rem;
      height: 1.25rem;
    }
    
    .chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      background-color: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      min-height: 12rem;
    }
    
    .chat-message {
      display: flex;
      gap: 0.5rem;
    }
    
    .chat-message.user {
      justify-content: flex-end;
    }
    
    .chat-message-avatar {
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }
    
    .chat-message-bubble {
      background: white;
      border-radius: 0.5rem;
      padding: 0.75rem;
      font-size: 0.875rem;
      color: #1f2937;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      max-width: 70%;
    }
    
    .chat-message.user .chat-message-bubble {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    
    .chat-buttons {
      padding: 1rem;
      background: white;
      border-radius: 0 0 1rem 1rem;
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
    
    .chat-quick-btn {
      text-align: left;
      padding: 0.75rem;
      font-size: 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid;
      background: transparent;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .chat-quick-btn-danger {
      background-color: #fee2e2;
      border-color: #fecaca;
      color: #991b1b;
    }
    
    .chat-quick-btn-danger:hover {
      background-color: #fecaca;
    }
    
    .chat-quick-btn-blue {
      background-color: #dbeafe;
      border-color: #bfdbfe;
      color: #1e40af;
    }
    
    .chat-quick-btn-blue:hover {
      background-color: #bfdbfe;
    }
    
    .chat-quick-btn-orange {
      background-color: #fed7aa;
      border-color: #fdba74;
      color: #92400e;
    }
    
    .chat-quick-btn-orange:hover {
      background-color: #fdba74;
    }
    
    .chat-quick-btn-gray {
      background-color: #f3f4f6;
      border-color: #d1d5db;
      color: #374151;
    }
    
    .chat-quick-btn-gray:hover {
      background-color: #d1d5db;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background-color: #1f2937;
      color: white;
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      box-shadow: 0 10px 15px rgba(0,0,0,0.1);
      z-index: 50;
      transform: translateY(5rem);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* Footer */
    footer {
      background: white;
      border-top: 1px solid #e5e7eb;
      margin-top: 2rem;
    }
    
    .footer-content {
      max-width: 80rem;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    
    .footer-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    @media (min-width: 768px) {
      .footer-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .footer-section h3 {
      font-weight: bold;
      color: #1f2937;
      margin-bottom: 1rem;
    }
    
    .footer-section ul {
      list-style: none;
      space: 0.5rem;
    }
    
    .footer-section li {
      margin-bottom: 0.5rem;
    }
    
    .footer-section a {
      font-size: 0.875rem;
      color: #6b7280;
      text-decoration: none;
      transition: color 0.2s;
    }
    
    .footer-section a:hover {
      color: #10b981;
    }
    
    .footer-bottom {
      border-top: 1px solid #e5e7eb;
      padding-top: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    @media (min-width: 768px) {
      .footer-bottom {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }
    
    .footer-text {
      font-size: 0.875rem;
      color: #9ca3af;
    }
    
    .social-links {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .social-btn {
      width: 2rem;
      height: 2rem;
      background-color: #f3f4f6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .social-btn:hover {
      background-color: #d1d5db;
    }
    
    .social-btn svg {
      width: 1.25rem;
      height: 1.25rem;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gray-100">
  <div class="h-full overflow-auto"><!-- Header -->
   <header class="bg-gradient-to-r from-green-500 to-green-600 sticky top-0 z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-3">
     <div class="flex items-center justify-between gap-4"><!-- Logo -->
      <div class="flex items-center gap-2">
       <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center font-bold text-lg bg-gradient-to-br from-green-400 to-green-600 text-white relative">
        <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-0.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-0.16 0.28-0.25 0.61-0.25 0.96 0 1.1 0.9 2 2 2h12v-2H7.42c-0.14 0-0.25-0.11-0.25-0.25l0.03-0.12 0.9-1.63h7.45c0.75 0 1.41-0.41 1.75-1.03l3.58-6.49c0.08-0.14 0.12-0.31 0.12-0.48 0-0.55-0.45-1-1-1H5.21l-0.94-2H1zm16 16c-1.1 0-1.99 0.9-1.99 2S15.9 22 17 22s2-0.9 2-2-0.9-2-2-2z" />
        </svg>
       </div><span class="text-white font-bold text-xl hidden sm:block">TokoKu</span>
      </div><!-- Search Bar -->
      <div class="flex-1 max-w-2xl">
       <div class="relative"><input type="text" placeholder="Cari produk impianmu..." class="w-full px-4 py-2.5 pl-12 rounded-xl border-0 focus:ring-2 focus:ring-green-300 outline-none text-sm" id="searchInput">
        <svg class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
       </div>
      </div><!-- Nav Icons -->
      <div class="flex items-center gap-3"><button class="relative p-2 text-white hover:bg-white/20 rounded-xl transition" onclick="showCart()">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg><span id="cartBadge" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold text-white hidden">0</span> </button> <button class="p-2 text-white hover:bg-white/20 rounded-xl transition hidden sm:block">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0018 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
        </svg></button> <button class="flex items-center gap-2 bg-white/20 hover:bg-white/30 px-3 py-2 rounded-xl text-white transition" onclick="showLogin()">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg><span class="hidden sm:block text-sm font-medium">Masuk</span> </button>
      </div>
     </div>
    </div><!-- Category Nav -->
    <div class="bg-white/10 backdrop-blur">
     <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center gap-6 py-2 overflow-x-auto hide-scrollbar text-sm"><a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Elektronik</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Fashion Pria</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Fashion Wanita</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Kesehatan</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Makanan</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Hobi</a> <a href="#" class="text-white/90 hover:text-white whitespace-nowrap transition">Otomotif</a>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="max-w-7xl mx-auto px-4 py-6"><!-- Banner Carousel -->
    <div class="relative rounded-2xl overflow-hidden mb-8 shadow-lg">
     <div id="bannerSlider" class="flex transition-transform duration-500">
      <div class="w-full flex-shrink-0 bg-gradient-to-r from-purple-600 to-pink-500 p-8 md:p-12">
       <div class="max-w-lg"><span class="bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-sm font-bold">PROMO SPESIAL</span>
        <h2 class="text-white text-2xl md:text-4xl font-bold mt-4 mb-2">Diskon Hingga 70%!</h2>
        <p class="text-white/80 mb-4">Belanja hemat untuk semua kebutuhanmu</p><button class="bg-white text-purple-600 px-6 py-2.5 rounded-xl font-semibold hover:bg-gray-100 transition"> Belanja Sekarang </button>
       </div>
      </div>
      <div class="w-full flex-shrink-0 bg-gradient-to-r from-blue-600 to-cyan-500 p-8 md:p-12">
       <div class="max-w-lg"><span class="bg-white text-blue-600 px-3 py-1 rounded-full text-sm font-bold">GRATIS ONGKIR</span>
        <h2 class="text-white text-2xl md:text-4xl font-bold mt-4 mb-2">Bebas Ongkir Seluruh Indonesia</h2>
        <p class="text-white/80 mb-4">Minimum belanja Rp50.000</p><button class="bg-white text-blue-600 px-6 py-2.5 rounded-xl font-semibold hover:bg-gray-100 transition"> Lihat Ketentuan </button>
       </div>
      </div>
      <div class="w-full flex-shrink-0 bg-gradient-to-r from-orange-500 to-red-500 p-8 md:p-12">
       <div class="max-w-lg"><span class="bg-white text-orange-600 px-3 py-1 rounded-full text-sm font-bold">FLASH SALE</span>
        <h2 class="text-white text-2xl md:text-4xl font-bold mt-4 mb-2">Flash Sale Setiap Hari!</h2>
        <p class="text-white/80 mb-4">Jam 12:00, 18:00, dan 21:00 WIB</p><button class="bg-white text-orange-600 px-6 py-2.5 rounded-xl font-semibold hover:bg-gray-100 transition"> Lihat Flash Sale </button>
       </div>
      </div>
     </div><!-- Banner Navigation -->
     <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2"><button onclick="goToSlide(0)" class="banner-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition" data-index="0"></button> <button onclick="goToSlide(1)" class="banner-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition" data-index="1"></button> <button onclick="goToSlide(2)" class="banner-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition" data-index="2"></button>
     </div><button onclick="prevSlide()" class="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg></button> <button onclick="nextSlide()" class="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg></button>
    </div><!-- Flash Sale -->
    <section class="mb-8">
     <div class="bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-4 mb-4 shadow-lg">
      <div class="flex items-center justify-between">
       <div class="flex items-center gap-3">
        <div>
         <h2 class="text-lg font-bold text-white">Flash Sale</h2>
         <p class="text-xs text-white/80">Kesempatan emas hemat besar-besaran!</p>
        </div>
       </div>
       <div class="text-right">
        <p class="text-xs text-white/90 mb-1">Berakhir dalam:</p>
        <div class="bg-white/20 backdrop-blur px-3 py-2 rounded-lg"><span id="flashTimer" class="font-mono font-bold text-white text-lg">02:45:30</span>
        </div>
       </div>
      </div>
     </div>
     <div class="flex gap-4 overflow-x-auto hide-scrollbar pb-2" id="flashSaleContainer"><!-- Flash sale products will be inserted here -->
     </div>
    </section><!-- Product Grid -->
    <section class="mb-8">
     <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-gray-800">Produk Untukmu</h2><select id="sortSelect" onchange="sortProducts()" class="bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 outline-none"> <option value="default">Urutkan</option> <option value="price-low">Harga Terendah</option> <option value="price-high">Harga Tertinggi</option> <option value="rating">Rating Tertinggi</option> <option value="sold">Terlaris</option> </select>
     </div>
     <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4" id="productGrid"><!-- Products will be inserted here -->
     </div>
    </section>
   </main><!-- Footer -->
   <footer class="bg-white border-t">
    <div class="max-w-7xl mx-auto px-4 py-8">
     <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
      <div>
       <h3 class="font-bold text-gray-800 mb-4">TokoKu</h3>
       <ul class="space-y-2 text-sm text-gray-600">
        <li><a href="#" class="hover:text-green-600">Tentang Kami</a></li>
        <li><a href="#" class="hover:text-green-600">Karir</a></li>
        <li><a href="#" class="hover:text-green-600">Blog</a></li>
        <li><a href="#" class="hover:text-green-600">TokoKu Affiliate</a></li>
       </ul>
      </div>
      <div>
       <h3 class="font-bold text-gray-800 mb-4">Beli</h3>
       <ul class="space-y-2 text-sm text-gray-600">
        <li><a href="#" class="hover:text-green-600">Tagihan &amp; Isi Ulang</a></li>
        <li><a href="#" class="hover:text-green-600">Promo</a></li>
        <li><a href="#" class="hover:text-green-600">CoD</a></li>
       </ul>
      </div>
      <div>
       <h3 class="font-bold text-gray-800 mb-4">Jual</h3>
       <ul class="space-y-2 text-sm text-gray-600">
        <li><a href="#" class="hover:text-green-600">Pusat Seller</a></li>
        <li><a href="#" class="hover:text-green-600">Daftar Toko</a></li>
        <li><a href="#" class="hover:text-green-600">Mitra TokoKu</a></li>
       </ul>
      </div>
      <div>
       <h3 class="font-bold text-gray-800 mb-4">Bantuan</h3>
       <ul class="space-y-2 text-sm text-gray-600">
        <li><a href="#" class="hover:text-green-600">Pusat Bantuan</a></li>
        <li><a href="#" class="hover:text-green-600">Hubungi Kami</a></li>
        <li><a href="#" class="hover:text-green-600">Syarat &amp; Ketentuan</a></li>
        <li><a href="#" class="hover:text-green-600">Kebijakan Privasi</a></li>
       </ul>
      </div>
     </div>
     <div class="border-t pt-6 flex flex-col md:flex-row items-center justify-between gap-4">
      <p class="text-sm text-gray-500">¬© 2024 TokoKu - Demo Marketplace. Ini adalah website demo untuk pembelajaran.</p>
      <div class="flex items-center gap-4"><span class="text-sm text-gray-500">Ikuti Kami:</span>
       <div class="flex gap-3"><a href="#" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-green-100 transition">
         <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewbox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
         </svg></a> <a href="#" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-green-100 transition">
         <svg class="w-5 h-5 text-pink-600" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.015-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1 1 12.324 0 6.162 6.162 0 0 1-12.324 0zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm4.965-10.322a1.44 1.44 0 1 1 2.881.001 1.44 1.44 0 0 1-2.881-.001z" />
         </svg></a> <a href="#" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-green-100 transition">
         <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewbox="0 0 24 24"><path d="M23.953 4.57a10 10 0 002.856-3.89 9.86 9.86 0 01-2.8.856 4.902 4.902 0 00-8.526 4.477c-4.067-.193-7.68-2.15-10.1-5.144a4.902 4.902 0 001.523 6.574 4.888 4.888 0 01-2.221-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.903 4.903 0 01-2.212.084 4.905 4.905 0 004.58 3.417A9.867 9.867 0 010 19.54a13.998 13.998 0 007.618 2.23c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
         </svg></a>
       </div>
      </div>
     </div>
    </div>
   </footer><!-- Cart Modal -->
   <div id="cartModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl w-full max-w-lg max-h-[80%] overflow-hidden flex flex-col">
     <div class="p-4 border-b flex items-center justify-between">
      <h3 class="font-bold text-lg flex items-center gap-2">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
       </svg> Keranjang Belanja</h3><button onclick="closeCart()" class="w-8 h-8 hover:bg-gray-100 rounded-full flex items-center justify-center">‚úï</button>
     </div>
     <div class="flex-1 overflow-auto p-4" id="cartItems"><!-- Cart items will be inserted here -->
     </div>
     <div class="p-4 border-t bg-gray-50">
      <div class="flex items-center justify-between mb-4"><span class="text-gray-600">Total:</span> <span class="text-xl font-bold text-green-600" id="cartTotal">Rp 0</span>
      </div><button onclick="showPayment()" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-semibold transition"> Checkout </button>
     </div>
    </div>
   </div><!-- Product Detail Modal -->
   <div id="productModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl w-full max-w-2xl max-h-[90%] overflow-auto">
     <div id="productModalContent"><!-- Product detail will be inserted here -->
     </div>
    </div>
   </div><!-- Payment Modal -->
   <div id="paymentModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl w-full max-w-md max-h-[90%] overflow-auto">
     <div id="paymentContent"><!-- Payment content will be inserted here -->
     </div>
    </div>
   </div><!-- Toast Notification -->
   <div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-3 rounded-xl shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50"><span id="toastMessage">Produk ditambahkan ke keranjang!</span>
   </div><!-- Customer Service Chat Bubble -->
   <div id="chatBubble" class="fixed bottom-6 right-6 z-40"><!-- Chat Button --> <button onclick="toggleChatWindow()" id="chatBtn" class="w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all flex items-center justify-center animate-bounce overflow-hidden border-2 border-white"> <img src="https://files.catbox.moe/kwo32b.jpg" alt="Customer Service" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='linear-gradient(135deg, #10b981, #059669)'; this.style.display='none';"> </button> <!-- Chat Window -->
    <div id="chatWindow" class="absolute bottom-20 right-0 w-80 bg-white rounded-2xl shadow-2xl hidden flex flex-col max-h-96"><!-- Chat Header -->
     <div class="bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-t-2xl">
      <div class="flex items-center justify-between">
       <div class="flex items-center gap-3"><img src="https://files.catbox.moe/kwo32b.jpg" alt="Customer Service" class="w-10 h-10 rounded-full object-cover border-2 border-white" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none';">
        <div>
         <h3 class="font-bold text-lg">Customer Service</h3>
         <p class="text-xs text-green-100">Biasanya kami respon dalam 2 menit</p>
        </div>
       </div><button onclick="toggleChatWindow()" class="text-white hover:bg-white/20 p-1 rounded-lg transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg></button>
      </div>
     </div><!-- Chat Messages Area -->
     <div class="flex-1 p-4 overflow-y-auto space-y-3 bg-gray-50 min-h-48"><!-- Welcome Message -->
      <div class="flex gap-2"><img src="https://files.catbox.moe/kwo32b.jpg" alt="CS" class="w-8 h-8 rounded-full object-cover flex-shrink-0" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-bold flex-shrink-0\'>CS</div>';">
       <div class="bg-white rounded-lg p-3 text-sm text-gray-800 shadow-sm">
        Halo! üëã Ada yang bisa kami bantu?
       </div>
      </div>
     </div><!-- Chat Input Area -->
     <div class="p-4 border-t bg-white rounded-b-2xl">
      <div class="space-y-2"><button onclick="sendQuickMessage('Saya ingin melaporkan produk rusak')" class="w-full text-left px-3 py-2 text-sm bg-red-50 hover:bg-red-100 text-red-700 rounded-lg transition border border-red-200"> ‚ö†Ô∏è Lapor Produk Rusak </button> <button onclick="sendQuickMessage('Saya punya pertanyaan tentang pengiriman')" class="w-full text-left px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition border border-blue-200"> üì¶ Pertanyaan Pengiriman </button> <button onclick="sendQuickMessage('Saya ingin mengembalikan barang')" class="w-full text-left px-3 py-2 text-sm bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-lg transition border border-orange-200"> ‚Ü©Ô∏è Pengembalian Barang </button> <button onclick="sendQuickMessage('Lainnya...')" class="w-full text-left px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition border border-gray-300"> üí¨ Pertanyaan Lainnya </button>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Product Data
    const products = [
      { id: 1, name: "Smartphone Galaxy Pro Max", price: 4999000, originalPrice: 5999000, rating: 4.8, sold: 2541, category: "elektronik", shop: "TechStore Official", location: "Jakarta" },
      { id: 2, name: "Laptop Gaming RTX Series", price: 15999000, originalPrice: 18999000, rating: 4.9, sold: 892, category: "elektronik", shop: "Laptop World", location: "Bandung" },
      { id: 3, name: "Earbuds Wireless Pro", price: 299000, originalPrice: 499000, rating: 4.7, sold: 8923, category: "elektronik", shop: "Audio Heaven", location: "Surabaya" },
      { id: 4, name: "Kaos Polos Premium Cotton", price: 89000, originalPrice: 129000, rating: 4.6, sold: 15420, category: "fashion", shop: "Fashion Hub", location: "Jakarta" },
      { id: 5, name: "Sepatu Running Ultra Boost", price: 899000, originalPrice: 1299000, rating: 4.8, sold: 3210, category: "olahraga", shop: "Sport Center", location: "Medan" },
      { id: 6, name: "Skincare Set Complete", price: 259000, originalPrice: 399000, rating: 4.9, sold: 7650, category: "kesehatan", shop: "Beauty Store", location: "Jakarta" },
      { id: 7, name: "Snack Box Premium Mix", price: 149000, originalPrice: 199000, rating: 4.5, sold: 12300, category: "makanan", shop: "Snack Paradise", location: "Yogyakarta" },
      { id: 8, name: "Helm Full Face Racing", price: 599000, originalPrice: 799000, rating: 4.7, sold: 1890, category: "otomotif", shop: "Rider Gear", location: "Semarang" },
      { id: 9, name: "Lampu LED Smart Home", price: 129000, originalPrice: 179000, rating: 4.6, sold: 5670, category: "rumah", shop: "Home Living", location: "Jakarta" },
      { id: 10, name: "Novel Best Seller 2024", price: 79000, originalPrice: 99000, rating: 4.8, sold: 4521, category: "buku", shop: "Book Corner", location: "Bandung" },
      { id: 11, name: "Smart Watch Series 5", price: 1299000, originalPrice: 1799000, rating: 4.8, sold: 2100, category: "elektronik", shop: "Gadget Zone", location: "Jakarta" },
      { id: 12, name: "Tas Ransel Anti Air", price: 259000, originalPrice: 349000, rating: 4.6, sold: 6780, category: "fashion", shop: "Bag Store", location: "Surabaya" },
      { id: 13, name: "Vitamin C 1000mg", price: 85000, originalPrice: 120000, rating: 4.7, sold: 9870, category: "kesehatan", shop: "Health Plus", location: "Jakarta" },
      { id: 14, name: "Keyboard Mechanical RGB", price: 459000, originalPrice: 599000, rating: 4.9, sold: 3450, category: "elektronik", shop: "PC Master", location: "Bandung" },
      { id: 15, name: "Kopi Arabica Premium", price: 125000, originalPrice: 165000, rating: 4.8, sold: 8900, category: "makanan", shop: "Coffee Lovers", location: "Malang" },
      { id: 16, name: "Yoga Mat Premium", price: 199000, originalPrice: 279000, rating: 4.6, sold: 2340, category: "olahraga", shop: "Fitness Pro", location: "Jakarta" },
      { id: 17, name: "Mouse Gaming Wireless", price: 349000, originalPrice: 449000, rating: 4.8, sold: 4560, category: "elektronik", shop: "Gaming Store", location: "Surabaya" },
      { id: 18, name: "Dress Casual Wanita", price: 189000, originalPrice: 259000, rating: 4.7, sold: 5670, category: "fashion", shop: "Trendy Shop", location: "Jakarta" },
    ];

    let cart = [];
    let currentSlide = 0;
    let filteredProducts = [...products];
    let selectedPaymentMethod = null;

    // Initialize
    function init() {
      renderProducts(filteredProducts);
      renderFlashSale();
      startFlashTimer();
      startBannerAutoSlide();
      updateCartBadge();
    }

    // Render Products
    function renderProducts(productList) {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = productList.map(product => `
        <div class="product-card bg-white rounded-xl overflow-hidden shadow-sm cursor-pointer" onclick="showProductDetail(${product.id})">
          <div class="aspect-square bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center text-6xl relative overflow-hidden">
            <img src="https://files.catbox.moe/5wy0jz.png" alt="${product.name}" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='‚óè'; this.parentElement.classList.add('text-gray-400');">
            ${product.originalPrice > product.price ? `<span class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold">${Math.round((1 - product.price/product.originalPrice) * 100)}%</span>` : ''}
          </div>
          <div class="p-3">
            <h3 class="text-sm font-medium text-gray-800 line-clamp-2 mb-2 h-10">${product.name}</h3>
            <p class="text-green-600 font-bold mb-1">${formatPrice(product.price)}</p>
            ${product.originalPrice > product.price ? `<p class="text-xs text-gray-400 line-through">${formatPrice(product.originalPrice)}</p>` : ''}
            <div class="flex items-center gap-2 mt-2 text-xs text-gray-500">
              <span class="flex items-center gap-1">
                <svg class="w-4 h-4" fill="#EAB308" viewBox="0 0 24 24">
                  <path d="M12 2l3.09 6.26L22 9.27l-5.18 5.09 1.22 7.16L12 17.77l-5.95 3.75 1.22-7.16L2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span class="font-semibold">${product.rating}</span>
              </span>
              <span>‚Ä¢</span>
              <span>${formatSold(product.sold)}terjual</span>
            </div>
            <div class="flex items-center gap-1 mt-2 text-xs text-gray-500">
              <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
              <span>${product.location}</span>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Render Flash Sale
    function renderFlashSale() {
      const container = document.getElementById('flashSaleContainer');
      const flashProducts = products.filter(p => p.originalPrice > p.price).slice(0, 6);
      container.innerHTML = flashProducts.map(product => `
        <div class="product-card bg-white rounded-xl overflow-hidden shadow-sm cursor-pointer flex-shrink-0 w-40" onclick="showProductDetail(${product.id})">
          <div class="aspect-square bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center text-4xl relative overflow-hidden">
            <img src="https://files.catbox.moe/5wy0jz.png" alt="${product.name}" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='‚óè'; this.parentElement.classList.add('text-gray-400');">
            <span class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded font-bold">${Math.round((1 - product.price/product.originalPrice) * 100)}%</span>
          </div>
          <div class="p-2">
            <p class="text-red-600 font-bold text-sm">${formatPrice(product.price)}</p>
            <p class="text-xs text-gray-400 line-through">${formatPrice(product.originalPrice)}</p>
            <div class="mt-2 bg-red-100 rounded-full h-2 overflow-hidden">
              <div class="bg-red-500 h-full rounded-full" style="width: ${Math.min(product.sold / 100, 100)}%"></div>
            </div>
            <p class="text-xs text-gray-500 mt-1">Tersisa ${Math.max(100 - Math.floor(product.sold / 100), 5)}</p>
          </div>
        </div>
      `).join('');
    }

    // Product Detail Modal
    function showProductDetail(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const modal = document.getElementById('productModal');
      const content = document.getElementById('productModalContent');
      const discount = product.originalPrice > product.price ? Math.round((1 - product.price/product.originalPrice) * 100) : 0;
      
      content.innerHTML = `
        <div class="bg-gradient-to-br from-green-50 via-white to-blue-50">
          <!-- Close Button -->
          <button onclick="closeProductModal()" class="absolute top-4 right-4 w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg hover:bg-gray-100 transition z-10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>

          <!-- Product Image Section -->
          <div class="relative bg-gradient-to-br from-green-100 to-blue-100 p-8 pb-12 overflow-hidden">
            <img src="https://files.catbox.moe/5wy0jz.png" alt="${product.name}" class="w-64 h-64 object-cover mx-auto rounded-lg shadow-lg" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none';">
            
            <!-- Discount Badge -->
            ${discount > 0 ? `
              <div class="absolute top-4 left-4 bg-gradient-to-r from-red-500 to-orange-500 text-white px-4 py-2 rounded-full font-bold shadow-lg">
                <div class="text-lg">${discount}% OFF</div>
              </div>
            ` : ''}
            
            <!-- Wishlist Button -->
            <button class="absolute bottom-4 right-4 w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-lg hover:bg-gray-100 transition hover:scale-110">
              <svg class="w-6 h-6 text-red-500" fill="currentColor" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            </button>
          </div>

          <!-- Product Info Section -->
          <div class="p-6 space-y-6">
            <!-- Title -->
            <div>
              <h2 class="text-2xl font-bold text-gray-800 mb-4 leading-tight">${product.name}</h2>
            </div>

            <!-- Price Section -->
            <div class="bg-gradient-to-r from-green-50 via-green-100 to-green-50 p-5 rounded-xl border-2 border-green-300 shadow-md">
              <p class="text-xs text-gray-600 mb-3 font-semibold">HARGA TERBAIK</p>
              <div class="flex flex-col gap-2 mb-4">
                <div class="flex items-end gap-2 flex-wrap">
                  <span class="text-3xl sm:text-4xl font-bold text-green-600 leading-none">${formatPrice(product.price)}</span>
                  ${product.originalPrice > product.price ? `<span class="text-sm text-gray-400 line-through pb-1">${formatPrice(product.originalPrice)}</span>` : ''}
                </div>
              </div>
              <div class="bg-white/60 px-3 py-2 rounded-lg">
                <p class="text-xs text-gray-700">‚úì Harga sudah termasuk pajak</p>
                <p class="text-xs text-gray-700">‚úì Gratis ongkir seluruh Indonesia</p>
              </div>
            </div>

            <!-- Shop Info -->
            <div class="bg-gray-50 p-4 rounded-xl">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-lg">T</div>
                  <div>
                    <p class="font-semibold text-gray-800">${product.shop}</p>
                    <p class="text-xs text-gray-500 flex items-center gap-1">
                      <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                      </svg>
                      ${product.location}
                    </p>
                  </div>
                </div>
                <button class="px-3 py-1 bg-white border-2 border-green-500 text-green-600 text-sm font-semibold rounded-lg hover:bg-green-50 transition">
                  Ikuti
                </button>
              </div>
              <div class="grid grid-cols-3 gap-2 text-center text-xs">
                <div class="py-2 border-t border-gray-200">
                  <p class="font-bold text-gray-800">100%</p>
                  <p class="text-gray-600">Puas</p>
                </div>
                <div class="py-2 border-t border-gray-200">
                  <p class="font-bold text-gray-800">2.5 jam</p>
                  <p class="text-gray-600">Respon</p>
                </div>
                <div class="py-2 border-t border-gray-200">
                  <p class="font-bold text-gray-800">5
                  <svg class="w-3 h-3 text-yellow-400 inline" fill="#EAB308" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5.18 5.09 1.22 7.16L12 17.77l-5.95 3.75 1.22-7.16L2 9.27l6.91-1.01L12 2z"/></svg></p>
                  <p class="text-gray-600">Rating</p>
                </div>
              </div>
            </div>

            <!-- Product Details -->
            <div class="space-y-3">
              <h3 class="font-bold text-gray-800 text-lg">Deskripsi Produk</h3>
              <div class="bg-blue-50 p-4 rounded-xl border-l-4 border-blue-500 space-y-2">
                <p class="text-sm text-gray-700 leading-relaxed flex items-start gap-2">
                  <svg class="w-4 h-4 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                  <span>Produk original dengan garansi resmi</span>
                </p>
                <p class="text-sm text-gray-700 leading-relaxed flex items-start gap-2">
                  <svg class="w-4 h-4 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                  <span>Kualitas terjamin dan telah teruji</span>
                </p>
                <p class="text-sm text-gray-700 leading-relaxed flex items-start gap-2">
                  <svg class="w-4 h-4 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                  <span>Kemasan premium dan aman</span>
                </p>
                <p class="text-sm text-gray-700 leading-relaxed flex items-start gap-2">
                  <svg class="w-4 h-4 text-green-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                  <span>Gratis ongkir ke seluruh Indonesia</span>
                </p>
              </div>
            </div>

            <!-- Quantity Selector -->
            <div class="flex items-center gap-4 bg-gray-100 p-3 rounded-xl">
              <span class="text-sm font-semibold text-gray-700">Jumlah:</span>
              <div class="flex items-center gap-3 ml-auto">
                <button id="qtyMinus" class="w-8 h-8 bg-white border-2 border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:text-green-500 transition font-bold">‚àí</button>
                <input type="number" id="qtyInput" value="1" min="1" class="w-12 text-center font-bold border-0 bg-transparent text-gray-800" readonly>
                <button id="qtyPlus" class="w-8 h-8 bg-white border-2 border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:text-green-500 transition font-bold">+</button>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-3">
              <button onclick="addToCart(${product.id})" class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-xl font-bold transition shadow-lg flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                Keranjang
              </button>
              <button onclick="buyNow(${product.id})" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-xl font-bold transition shadow-lg flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                Beli
              </button>
            </div>

            <!-- Trust Badges -->
            <div class="flex items-center justify-around pt-4 border-t">
              <div class="text-center">
                <svg class="w-6 h-6 mx-auto mb-1 text-green-600" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                <p class="text-xs text-gray-600">Asli Terverifikasi</p>
              </div>
              <div class="text-center">
                <svg class="w-6 h-6 mx-auto mb-1 text-blue-600" fill="currentColor" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg>
                <p class="text-xs text-gray-600">Terlindungi 100%</p>
              </div>
              <div class="text-center">
                <svg class="w-6 h-6 mx-auto mb-1 text-orange-600" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                <p class="text-xs text-gray-600">Garansi Resmi</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Quantity controls
      setTimeout(() => {
        const qtyInput = document.getElementById('qtyInput');
        const qtyMinus = document.getElementById('qtyMinus');
        const qtyPlus = document.getElementById('qtyPlus');
        
        if (qtyMinus && qtyPlus && qtyInput) {
          qtyMinus.onclick = () => {
            if (qtyInput.value > 1) qtyInput.value = parseInt(qtyInput.value) - 1;
          };
          qtyPlus.onclick = () => {
            qtyInput.value = parseInt(qtyInput.value) + 1;
          };
        }
      }, 0);
      
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeProductModal() {
      const modal = document.getElementById('productModal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }

    // Payment Functions
    function showPayment() {
      const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const modal = document.getElementById('paymentModal');
      const content = document.getElementById('paymentContent');

      content.innerHTML = `
        <div class="bg-gradient-to-br from-blue-50 to-indigo-50">
          <!-- Header -->
          <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white">
            <button onclick="closePayment()" class="mb-4 flex items-center gap-2 hover:opacity-80 transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              Kembali
            </button>
            <h2 class="text-2xl font-bold">Pilih Metode Pembayaran</h2>
            <p class="text-blue-100 text-sm mt-2">Pilih cara pembayaran yang sesuai untuk Anda</p>
          </div>

          <!-- Content -->
          <div class="p-6 space-y-4">
            <!-- Order Summary -->
            <div class="bg-white rounded-xl p-4 border-2 border-blue-200 mb-6">
              <h3 class="font-bold text-gray-800 mb-3">Ringkasan Pesanan</h3>
              <div class="space-y-2 mb-4 pb-4 border-b">
                ${cart.map(item => `
                  <div class="flex items-center justify-between text-sm">
                    <span class="text-gray-600">${item.name} x${item.qty}</span>
                    <span class="font-semibold text-gray-800">${formatPrice(item.price * item.qty)}</span>
                  </div>
                `).join('')}
              </div>
              <div class="flex items-center justify-between">
                <span class="font-bold text-gray-800">Total:</span>
                <span class="text-2xl font-bold text-blue-600">${formatPrice(total)}</span>
              </div>
            </div>

            <!-- Payment Methods -->
            <div class="space-y-3">
              <h3 class="font-bold text-gray-800">Metode Pembayaran</h3>
              
              <!-- Bank Transfer -->
              <div class="payment-method border-2 border-gray-200 rounded-xl p-4 cursor-not-allowed opacity-50 hover:shadow-none transition" onclick="selectPayment('transfer', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-gray-500">Transfer Bank</h4>
                    <p class="text-xs text-gray-400 mt-1">BRI, BCA, Mandiri, BTN, Lainnya</p>
                    <p class="text-xs text-red-500 mt-2 font-semibold">Tidak tersedia</p>
                  </div>
                </div>
              </div>

              <!-- E-Wallet -->
              <div class="payment-method border-2 border-gray-200 rounded-xl p-4 cursor-not-allowed opacity-50 hover:shadow-none transition" onclick="selectPayment('ewallet', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-gray-500">E-Wallet</h4>
                    <p class="text-xs text-gray-400 mt-1">GoPay, OVO, DANA, LinkAja</p>
                    <p class="text-xs text-red-500 mt-2 font-semibold">Tidak tersedia</p>
                  </div>
                </div>
              </div>

              <!-- Credit Card -->
              <div class="payment-method border-2 border-gray-200 rounded-xl p-4 cursor-not-allowed opacity-50 hover:shadow-none transition" onclick="selectPayment('card', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-gray-500">Kartu Kredit</h4>
                    <p class="text-xs text-gray-400 mt-1">Visa, Mastercard, AmEx</p>
                    <p class="text-xs text-red-500 mt-2 font-semibold">Tidak tersedia</p>
                  </div>
                </div>
              </div>

              <!-- COD -->
              <div class="payment-method border-2 border-gray-200 rounded-xl p-4 cursor-not-allowed opacity-50 hover:shadow-none transition" onclick="selectPayment('cod', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-gray-500">Bayar di Tempat (COD)</h4>
                    <p class="text-xs text-gray-400 mt-1">Bayar saat barang sampai</p>
                    <p class="text-xs text-red-500 mt-2 font-semibold">Tidak tersedia</p>
                  </div>
                </div>
              </div>

              <!-- Bank Installment -->
              <div class="payment-method border-2 border-gray-200 rounded-xl p-4 cursor-not-allowed opacity-50 hover:shadow-none transition" onclick="selectPayment('installment', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-gray-500">Cicilan 0%</h4>
                    <p class="text-xs text-gray-400 mt-1">Tanggungan tersedia dari berbagai bank</p>
                    <p class="text-xs text-red-500 mt-2 font-semibold">Tidak tersedia</p>
                  </div>
                </div>
              </div>

              <!-- QRIS -->
              <div class="payment-method border-2 border-green-500 rounded-xl p-4 cursor-pointer hover:shadow-lg transition bg-green-50" onclick="selectPayment('qris', this)">
                <div class="flex items-start gap-3">
                  <div class="flex-1">
                    <h4 class="font-semibold text-green-700">QRIS</h4>
                    <p class="text-xs text-green-600 mt-1">Scan kode QR dengan aplikasi e-wallet</p>
                    <p class="text-xs text-green-600 mt-2 font-semibold">‚úì Metode pembayaran aktif</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-3 pt-4">
              <button onclick="closePayment()" class="px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold hover:bg-gray-300 transition">
                Batal
              </button>
              <button onclick="processPayment()" class="px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition disabled:opacity-50" id="payBtn" disabled>
                Lanjutkan Pembayaran
              </button>
            </div>
          </div>
        </div>
      `;

      modal.classList.remove('hidden');
      modal.classList.add('flex');
      closeCart();
    }

    function selectPayment(method, element) {
      // Hanya QRIS yang bisa dipilih
      if (method !== 'qris') {
        showToast('Metode pembayaran hanya tersedia untuk QRIS');
        return;
      }
      
      selectedPaymentMethod = method;
      
      // Remove active state from all
      document.querySelectorAll('.payment-method').forEach(el => {
        el.classList.remove('active');
      });
      
      // Add active state to selected
      element.classList.add('active');
      
      // Enable button
      document.getElementById('payBtn').disabled = false;
      
      // Show QRIS display
      showQrisDisplay();
    }

    function showQrisDisplay() {
      const modal = document.getElementById('paymentModal');
      const content = document.getElementById('paymentContent');
      const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);

      content.innerHTML = `
        <div class="bg-gradient-to-br from-green-50 to-blue-50">
          <!-- Header -->
          <div class="bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white">
            <button onclick="backToPaymentMethods()" class="mb-4 flex items-center gap-2 hover:opacity-80 transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              Kembali
            </button>
            <h2 class="text-2xl font-bold">Pembayaran QRIS</h2>
            <p class="text-green-100 text-sm mt-2">Scan kode QR di bawah dengan aplikasi e-wallet Anda</p>
          </div>

          <!-- Content -->
          <div class="p-6">
            <!-- Total Amount -->
            <div class="bg-white rounded-xl p-4 border-2 border-green-300 mb-6 text-center">
              <p class="text-gray-600 text-sm mb-2">Total Pembayaran</p>
              <p class="text-3xl font-bold text-green-600">${formatPrice(total)}</p>
            </div>

            <!-- QRIS Code Display -->
            <div class="bg-white rounded-2xl p-6 text-center mb-6 shadow-lg">
              <p class="text-gray-600 text-sm mb-4 font-semibold">Scan Kode QR</p>
              <div class="flex justify-center">
                <img src="https://files.catbox.moe/6iekfc.jpg" alt="QRIS Code" class="w-64 h-64 object-contain rounded-lg border-4 border-green-200" loading="lazy" onerror="console.error('QRIS image failed to load'); this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-center py-8\'><p class=\'text-red-500\'>Gagal memuat kode QR</p></div>';">
              </div>
              <p class="text-xs text-gray-500 mt-4">Gunakan aplikasi e-wallet: GoPay, OVO, DANA, LinkAja, dll</p>
            </div>

            <!-- Instructions -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6 space-y-3">
              <h4 class="font-semibold text-gray-800 text-sm">Cara Pembayaran:</h4>
              <ol class="space-y-2 text-sm text-gray-700">
                <li class="flex gap-3">
                  <span class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold">1</span>
                  <span>Buka aplikasi e-wallet di smartphone Anda</span>
                </li>
                <li class="flex gap-3">
                  <span class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold">2</span>
                  <span>Pilih menu "Scan QRIS" atau "Bayar"</span>
                </li>
                <li class="flex gap-3">
                  <span class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold">3</span>
                  <span>Arahkan kamera ke kode QR di atas</span>
                </li>
                <li class="flex gap-3">
                  <span class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold">4</span>
                  <span>Konfirmasi dan masukkan PIN untuk menyelesaikan pembayaran</span>
                </li>
              </ol>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-3">
              <button onclick="backToPaymentMethods()" class="px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold hover:bg-gray-300 transition">
                Batal
              </button>
              <button onclick="processQrisPayment()" class="px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition" id="processQrisBtn">
                <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                Proses Pembayaran
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function backToPaymentMethods() {
      selectedPaymentMethod = null;
      showPayment();
    }

    function processQrisPayment() {
      const modal = document.getElementById('paymentModal');
      const content = document.getElementById('paymentContent');
      const btn = document.getElementById('processQrisBtn');
      
      // Disable button and show loading
      btn.disabled = true;
      
      content.innerHTML = `
        <div class="bg-gradient-to-br from-green-50 to-blue-50">
          <!-- Header -->
          <div class="bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white">
            <h2 class="text-2xl font-bold">Memproses Pembayaran</h2>
            <p class="text-green-100 text-sm mt-2">Silakan tunggu...</p>
          </div>

          <!-- Loading Content -->
          <div class="p-8 flex flex-col items-center justify-center min-h-96">
            <!-- Animated Loading Spinner -->
            <div class="mb-8">
              <div class="relative w-24 h-24">
                <div class="absolute inset-0 border-4 border-gray-200 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-transparent border-t-green-500 border-r-green-500 rounded-full animate-spin"></div>
              </div>
            </div>

            <!-- Loading Status -->
            <div class="text-center space-y-6">
              <div class="space-y-4">
                <!-- Step 1 -->
                <div class="flex items-center gap-3 justify-center p-4 bg-green-50 rounded-xl border-2 border-green-200">
                  <svg class="w-6 h-6 text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                  <span class="text-green-700 font-semibold">Menghubungkan ke server pembayaran...</span>
                </div>

                <!-- Step 2 -->
                <div id="loadingStep2" class="flex items-center gap-3 justify-center p-4 bg-blue-50 rounded-xl border-2 border-blue-200 opacity-40 transition-all duration-500">
                  <div class="w-6 h-6 flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-500 animate-spin" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" opacity="0.25"/><path stroke="currentColor" stroke-width="2" d="M12 2a10 10 0 0 1 10 10"/></svg>
                  </div>
                  <span class="text-blue-700 font-semibold">Mengunduh struk pembayaran...</span>
                </div>

                <!-- Step 3 -->
                <div id="loadingStep3" class="flex items-center gap-3 justify-center p-4 bg-purple-50 rounded-xl border-2 border-purple-200 opacity-40 transition-all duration-500">
                  <div class="w-6 h-6 flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-500 animate-spin" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" opacity="0.25"/><path stroke="currentColor" stroke-width="2" d="M12 2a10 10 0 0 1 10 10"/></svg>
                  </div>
                  <span class="text-purple-700 font-semibold">Memperbarui data pesanan...</span>
                </div>
              </div>

              <!-- Tips -->
              <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg mt-8 text-left">
                <p class="text-sm text-yellow-800 font-semibold mb-2">üí° Tips:</p>
                <p class="text-xs text-yellow-700">Jangan tutup halaman ini sampai proses selesai</p>
              </div>
            </div>
          </div>
        </div>
      `;

      // Simulate loading steps
      setTimeout(() => {
        document.getElementById('loadingStep2').classList.remove('opacity-40');
      }, 1500);

      setTimeout(() => {
        document.getElementById('loadingStep3').classList.remove('opacity-40');
      }, 3500);

      // Show failure after 30 seconds
      setTimeout(() => {
        showPaymentFailure();
      }, 30000);
    }

    function showPaymentFailure() {
      const modal = document.getElementById('paymentModal');
      const content = document.getElementById('paymentContent');

      content.innerHTML = `
        <div class="bg-gradient-to-br from-red-50 to-orange-50">
          <!-- Header -->
          <div class="bg-gradient-to-r from-red-600 to-orange-600 p-6 text-white">
            <h2 class="text-2xl font-bold">Pembayaran Gagal</h2>
            <p class="text-red-100 text-sm mt-2">Terjadi kesalahan dalam proses pembayaran</p>
          </div>

          <!-- Content -->
          <div class="p-8 flex flex-col items-center justify-center min-h-80">
            <!-- Error Icon -->
            <div class="mb-6">
              <div class="w-24 h-24 bg-red-100 rounded-full flex items-center justify-center animate-bounce">
                <svg class="w-12 h-12 text-red-600" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
              </div>
            </div>

            <!-- Error Message -->
            <div class="text-center space-y-4">
              <h3 class="text-xl font-bold text-gray-800">Pembayaran Tidak Terselesaikan</h3>
              <p class="text-gray-600 text-sm">Mohon maaf, proses pembayaran mengalami gangguan. Silakan coba lagi nanti.</p>
              
              <!-- Error Details -->
              <div class="bg-white border-l-4 border-red-500 p-4 rounded-lg mt-6 text-left">
                <p class="text-xs text-gray-600 mb-2">
                  <span class="font-semibold">Kode Error:</span> PAYMENT_TIMEOUT_30S
                </p>
                <p class="text-xs text-gray-600">
                  <span class="font-semibold">Waktu:</span> ${new Date().toLocaleTimeString('id-ID')}
                </p>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-3 mt-8 w-full">
              <button onclick="backToPaymentMethods()" class="px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold hover:bg-gray-300 transition">
                Coba Lagi
              </button>
              <button onclick="returnToHome()" class="px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition">
                Kembali ke Beranda
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function returnToHome() {
      cart = [];
      selectedPaymentMethod = null;
      closePayment();
      showToast('Kembali ke beranda üè†');
    }

    function finishPayment() {
      cart = [];
      selectedPaymentMethod = null;
      renderCartItems();
      updateCartBadge();
      closePayment();
      showToast('Terima kasih! Pesanan Anda sedang diproses üéâ');
    }

    function processPayment() {
      if (!selectedPaymentMethod) {
        showToast('Pilih metode pembayaran terlebih dahulu!');
        return;
      }

      const methodNames = {
        'transfer': 'Transfer Bank',
        'ewallet': 'E-Wallet',
        'card': 'Kartu Kredit',
        'cod': 'Bayar di Tempat',
        'installment': 'Cicilan 0%'
      };

      showToast(`Pembayaran via ${methodNames[selectedPaymentMethod]} berhasil! ‚úì`);
      cart = [];
      selectedPaymentMethod = null;
      renderCartItems();
      updateCartBadge();
      closePayment();
    }

    function closePayment() {
      const modal = document.getElementById('paymentModal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }

    // Cart Functions
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      const existingItem = cart.find(item => item.id === productId);
      if (existingItem) {
        existingItem.qty++;
      } else {
        cart.push({ ...product, qty: 1 });
      }

      updateCartBadge();
      showToast(`${product.name} ditambahkan ke keranjang!`);
      closeProductModal();
    }

    function buyNow(productId) {
      addToCart(productId);
      showCart();
    }

    function showCart() {
      renderCartItems();
      const modal = document.getElementById('cartModal');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeCart() {
      const modal = document.getElementById('cartModal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }

    function renderCartItems() {
      const container = document.getElementById('cartItems');
      const totalEl = document.getElementById('cartTotal');

      if (cart.length === 0) {
        container.innerHTML = `
          <div class="text-center py-8">
            <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
            <p class="text-gray-500">Keranjang belanja kosong</p>
            <p class="text-sm text-gray-400 mt-2">Yuk mulai belanja!</p>
          </div>
        `;
        totalEl.textContent = 'Rp 0';
        return;
      }

      container.innerHTML = cart.map(item => `
        <div class="flex gap-3 p-3 bg-gray-50 rounded-xl mb-3">
          <div class="w-16 h-16 bg-white rounded-lg flex items-center justify-center text-3xl flex-shrink-0 overflow-hidden">
            <img src="https://files.catbox.moe/5wy0jz.png" alt="${item.name}" class="w-full h-full object-cover" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='‚óè'; this.parentElement.classList.add('text-gray-400');">
          </div>
          <div class="flex-1 min-w-0">
            <h4 class="font-medium text-gray-800 text-sm line-clamp-1">${item.name}</h4>
            <p class="text-green-600 font-bold text-sm">${formatPrice(item.price)}</p>
            <div class="flex items-center gap-2 mt-2">
              <button onclick="updateCartQty(${item.id}, -1)" class="w-7 h-7 bg-white border rounded-lg flex items-center justify-center hover:bg-gray-100">-</button>
              <span class="w-8 text-center text-sm">${item.qty}</span>
              <button onclick="updateCartQty(${item.id}, 1)" class="w-7 h-7 bg-white border rounded-lg flex items-center justify-center hover:bg-gray-100">+</button>
              <button onclick="removeFromCart(${item.id})" class="ml-auto text-red-500 text-sm hover:underline">Hapus</button>
            </div>
          </div>
        </div>
      `).join('');

      const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      totalEl.textContent = formatPrice(total);
    }

    function updateCartQty(productId, change) {
      const item = cart.find(i => i.id === productId);
      if (item) {
        item.qty += change;
        if (item.qty <= 0) {
          cart = cart.filter(i => i.id !== productId);
        }
        renderCartItems();
        updateCartBadge();
      }
    }

    function removeFromCart(productId) {
      cart = cart.filter(i => i.id !== productId);
      renderCartItems();
      updateCartBadge();
      showToast('Produk dihapus dari keranjang');
    }

    function updateCartBadge() {
      const badge = document.getElementById('cartBadge');
      const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
      badge.textContent = totalQty;
      badge.style.display = totalQty > 0 ? 'flex' : 'none';
    }

    // Filter & Sort
    function filterByCategory(category) {
      filteredProducts = products.filter(p => p.category === category);
      renderProducts(filteredProducts);
      showToast(`Menampilkan kategori: ${category}`);
    }

    function showAllCategories() {
      filteredProducts = [...products];
      renderProducts(filteredProducts);
    }

    function sortProducts() {
      const sortBy = document.getElementById('sortSelect').value;
      let sorted = [...filteredProducts];
      
      switch(sortBy) {
        case 'price-low':
          sorted.sort((a, b) => a.price - b.price);
          break;
        case 'price-high':
          sorted.sort((a, b) => b.price - a.price);
          break;
        case 'rating':
          sorted.sort((a, b) => b.rating - a.rating);
          break;
        case 'sold':
          sorted.sort((a, b) => b.sold - a.sold);
          break;
      }
      
      renderProducts(sorted);
    }

    // Search
    document.getElementById('searchInput').addEventListener('input', function(e) {
      const query = e.target.value.toLowerCase();
      if (query.length > 0) {
        filteredProducts = products.filter(p => 
          p.name.toLowerCase().includes(query) || 
          p.category.toLowerCase().includes(query)
        );
      } else {
        filteredProducts = [...products];
      }
      renderProducts(filteredProducts);
    });

    // Banner Slider
    function goToSlide(index) {
      currentSlide = index;
      updateSlider();
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % 3;
      updateSlider();
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + 3) % 3;
      updateSlider();
    }

    function updateSlider() {
      const slider = document.getElementById('bannerSlider');
      slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      
      document.querySelectorAll('.banner-dot').forEach((dot, index) => {
        dot.classList.toggle('bg-white', index === currentSlide);
        dot.classList.toggle('bg-white/50', index !== currentSlide);
      });
    }

    function startBannerAutoSlide() {
      setInterval(nextSlide, 5000);
    }

    // Flash Sale Timer
    function startFlashTimer() {
      let hours = 2, minutes = 45, seconds = 30;
      
      setInterval(() => {
        seconds--;
        if (seconds < 0) {
          seconds = 59;
          minutes--;
        }
        if (minutes < 0) {
          minutes = 59;
          hours--;
        }
        if (hours < 0) {
          hours = 23;
          minutes = 59;
          seconds = 59;
        }
        
        document.getElementById('flashTimer').textContent = 
          `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }, 1000);
    }

    // Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.remove('translate-y-20', 'opacity-0');
      toast.classList.add('translate-y-0', 'opacity-100');
      
      setTimeout(() => {
        toast.classList.add('translate-y-20', 'opacity-0');
        toast.classList.remove('translate-y-0', 'opacity-100');
      }, 3000);
    }

    // Login Demo
    function showLogin() {
      showToast('Fitur login dalam mode demo');
    }

    // Chat Functions
    function toggleChatWindow() {
      const chatWindow = document.getElementById('chatWindow');
      const chatBtn = document.getElementById('chatBtn');
      chatWindow.classList.toggle('hidden');
      
      if (!chatWindow.classList.contains('hidden')) {
        chatBtn.classList.remove('animate-bounce');
      } else {
        chatBtn.classList.add('animate-bounce');
      }
    }

    function sendQuickMessage(message) {
      const messagesArea = document.querySelector('#chatWindow .overflow-y-auto');
      
      // Add user message
      const userMsg = document.createElement('div');
      userMsg.className = 'flex gap-2 justify-end';
      userMsg.innerHTML = `
        <div class="bg-green-500 text-white rounded-lg p-3 text-sm shadow-sm max-w-xs">
          ${message}
        </div>
      `;
      messagesArea.appendChild(userMsg);
      
      // Scroll to bottom
      messagesArea.scrollTop = messagesArea.scrollHeight;
      
      // Simulate CS response
      setTimeout(() => {
        const csMsg = document.createElement('div');
        csMsg.className = 'flex gap-2 animate-pulse';
        csMsg.innerHTML = `
          <img src="https://files.catbox.moe/kwo32b.jpg" alt="CS" class="w-8 h-8 rounded-full object-cover flex-shrink-0" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-bold flex-shrink-0\'>CS</div>';">
          <div class="bg-white rounded-lg p-3 text-sm text-gray-800 shadow-sm">
            <div class="flex gap-1">
              <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animation-delay-100"></div>
              <div class="w-2 h-2 bg-gray-400 rounded-full animation-delay-200"></div>
            </div>
          </div>
        `;
        messagesArea.appendChild(csMsg);
        messagesArea.scrollTop = messagesArea.scrollHeight;
        
        // Response after 1.5 seconds
        setTimeout(() => {
          csMsg.remove();
          const adminWhatsApp = '0858-3286-5045';
          const responses = {
            'produk rusak': `üò¢ Mohon maaf! Tim kami siap membantu. Silakan lampirkan foto produk yang rusak melalui WhatsApp admin kami di <a href="https://wa.me/6285832865045" target="_blank" rel="noopener noreferrer" class="text-blue-500 font-semibold hover:underline">${adminWhatsApp}</a>. Kami akan proses klaim Anda secepatnya.`,
            'pengiriman': `üì¶ Pesanan Anda dapat dilacak dengan tracking number yang sudah kami kirimkan. Untuk informasi lebih lanjut, hubungi admin kami di WhatsApp <a href="https://wa.me/6285832865045" target="_blank" rel="noopener noreferrer" class="text-blue-500 font-semibold hover:underline">${adminWhatsApp}</a>. Siap membantu! üòä`,
            'pengembalian': `üîÑ Barang dapat dikembalikan dalam 7 hari. Untuk proses pengembalian, silakan hubungi tim kami di WhatsApp <a href="https://wa.me/6285832865045" target="_blank" rel="noopener noreferrer" class="text-blue-500 font-semibold hover:underline">${adminWhatsApp}</a>. Kapan Anda ingin memulai proses?`,
            'lainnya': `üí¨ Baik, silakan ceritakan masalahnya dengan detail. Hubungi admin kami langsung di WhatsApp <a href="https://wa.me/6285832865045" target="_blank" rel="noopener noreferrer" class="text-blue-500 font-semibold hover:underline">${adminWhatsApp}</a>. Tim CS kami siap membantu 24/7!`
          };
          
          let response = `Terima kasih sudah menghubungi kami! üòä Untuk bantuan lebih cepat, silakan hubungi admin kami di WhatsApp <a href="https://wa.me/6285832865045" target="_blank" rel="noopener noreferrer" class="text-blue-500 font-semibold hover:underline">${adminWhatsApp}</a>. Tim kami siap membantu Anda!`;
          for (const [key, value] of Object.entries(responses)) {
            if (message.toLowerCase().includes(key)) {
              response = value;
              break;
            }
          }
          
          const finalMsg = document.createElement('div');
          finalMsg.className = 'flex gap-2';
          finalMsg.innerHTML = `
            <img src="https://files.catbox.moe/kwo32b.jpg" alt="CS" class="w-8 h-8 rounded-full object-cover flex-shrink-0" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-bold flex-shrink-0\'>CS</div>';">
            <div class="bg-white rounded-lg p-3 text-sm text-gray-800 shadow-sm max-w-xs">
              ${response}
            </div>
          `;
          messagesArea.appendChild(finalMsg);
          messagesArea.scrollTop = messagesArea.scrollHeight;
        }, 1500);
      }, 500);
    }

    // Helpers
    function formatPrice(price) {
      return 'Rp ' + price.toLocaleString('id-ID');
    }

    function formatSold(sold) {
      if (sold >= 1000) {
        return (sold / 1000).toFixed(1) + 'rb';
      }
      return sold;
    }

    // Close modals on background click
    document.getElementById('cartModal').addEventListener('click', function(e) {
      if (e.target === this) closeCart();
    });

    document.getElementById('productModal').addEventListener('click', function(e) {
      if (e.target === this) closeProductModal();
    });

    document.getElementById('paymentModal').addEventListener('click', function(e) {
      if (e.target === this) closePayment();
    });

    // Initialize app
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ccc7cd7f76a4092',t:'MTc3MDkwMzUyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
